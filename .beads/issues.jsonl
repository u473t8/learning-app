{"id":"learning-app-0rj","title":"3.1 Update task runner to use `device-db` and task payloads via `data`; update existing tasks accordingly","description":"Refactor task system: update `create-task` to accept `data` payload instead of `word-id`. Update `example-fetch` handler to read `word-id` from `data`. Update task runner to use `device-db`. Update all task creation calls.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.533241797+01:00","updated_at":"2026-01-29T10:15:56.426181136+01:00","closed_at":"2026-01-29T10:15:56.426181136+01:00","close_reason":"Updated task runner config to use device-db. Updated create-task to accept data payload instead of word-id. Updated example-fetch handler to read word-id from data. Updated create-fetch-task! to pass data payload."}
{"id":"learning-app-15h","title":"[READY][CODE] Implement trial-based lesson logic","description":"## What\nUpdate lesson.cljs to implement random trial selection and pass/fail tracking.\n\n## Functions to Update/Add\n\n### start-lesson!\n- Get 3 words with lowest retention (existing)\n- Generate trials array: for each word add :word trial, if has example add :example trial\n- Set remaining-trials = trials\n- Select first random trial as current-trial\n- Return lesson doc\n\n### select-random-trial! (new)\n- Pick random trial from remaining-trials\n- Update current-trial in lesson doc\n- Save to db\n- Return updated lesson\n\n### check-answer!\nUpdates needed:\n- Get correct answer from current trial (word.value or word.example.value)\n- Compare with user answer\n- Create review document via vocabulary/add-review\n- If correct:\n  - Remove current trial from remaining-trials\n  - If trial was example type AND online: fetch new example, delete old, update word in lesson\n- Set last-result {:correct? :correct-answer}\n- Save lesson\n- Return {:correct? :correct-answer :is-finished? (empty? remaining-trials)}\n\n### advance-lesson! (update)\n- If remaining-trials empty: return nil (finished)\n- Otherwise: select-random-trial!, clear last-result\n- Return updated lesson\n\n### get-current-word (new helper)\n- Given lesson and current-trial, return the word object\n\n### correct-answer (update)\n- Take current-trial instead of word\n- Return word.value if type=:word, word.example.value if type=:example\n\n## Acceptance Criteria\n- [ ] Random trial selection works\n- [ ] Failed trials remain in remaining-trials\n- [ ] Passed trials removed from remaining-trials\n- [ ] Example refresh on successful example trial\n- [ ] Lesson finishes when remaining-trials empty\n- [ ] REPL tested","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T08:30:57.191470883+01:00","created_by":"u473t8","updated_at":"2026-01-10T09:43:11.736374022+01:00","closed_at":"2026-01-10T09:43:11.736374022+01:00","close_reason":"Implemented trial-based lesson logic: start-lesson! creates trials from words+examples, check-answer! removes passed trials from remaining, refreshes example on success, advance-lesson! picks random from remaining. All functions tested, build compiles with 0 warnings.","dependencies":[{"issue_id":"learning-app-15h","depends_on_id":"learning-app-jet","type":"blocks","created_at":"2026-01-10T08:42:14.657934162+01:00","created_by":"u473t8"},{"issue_id":"learning-app-15h","depends_on_id":"learning-app-g4q","type":"blocks","created_at":"2026-01-10T08:42:14.805563347+01:00","created_by":"u473t8"}]}
{"id":"learning-app-1wz","title":"Restructure docs and update links","description":"## What\nReorganize docs into the agreed taxonomy and update all internal links accordingly.\n\n## Requirements\n- Move docs into: docs/ops, docs/dev, docs/process, docs/ui, docs/architecture\n- Keep docs in English only\n- Merge/remove redundant docs (e.g., contributor-guidance into process docs; remove empty placeholders or convert to templates)\n- Fix outdated references in server_configuration\n- Update all internal links after moves\n\n## Acceptance Criteria\n- [ ] Docs structure updated and consistent with taxonomy\n- [ ] All internal links updated and working\n- [ ] Redundant/empty docs resolved\n- [ ] server_configuration references match infra","status":"closed","priority":2,"issue_type":"task","assignee":"docs-maintainer","created_at":"2026-01-13T12:21:48.315479425+01:00","created_by":"u473t8","updated_at":"2026-01-13T13:46:42.189230513+01:00","closed_at":"2026-01-13T13:46:42.189237813+01:00","comments":[{"id":1,"issue_id":"learning-app-1wz","author":"u473t8","text":"Restructured docs into taxonomy (ops/dev/process/ui/architecture), merged contributor-guidance into code-discipline, added shaping-task template, translated philosophy + server-configuration to English, updated data-model examples to English, updated all internal links (AGENTS, readme, UI doc references). Removed obsolete docs/contributor-guidance.md.","created_at":"2026-01-13T12:37:25Z"},{"id":2,"issue_id":"learning-app-1wz","author":"u473t8","text":"User approved closure.","created_at":"2026-01-13T12:46:23Z"}]}
{"id":"learning-app-202","title":"7.1 Create test documentation for dictionary sync scenarios (fresh install, interruption, offline, no re-sync)","description":"Create test documentation: fresh install sync, interruption resume, offline scenario, no sync on subsequent starts. Document expected behaviors and manual verification steps.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.536310168+01:00","updated_at":"2026-01-29T10:21:49.745327019+01:00","closed_at":"2026-01-29T10:21:49.745327019+01:00","close_reason":"Created test/dictionary-sync.md with test scenarios for fresh install, interruption, offline, and no re-sync."}
{"id":"learning-app-3de","title":"1.1 Research CEFR A1-C2 sources and RU translations; document licenses and chosen sources in `docs/dictionary-sources.md`","description":"Research and document MERLIN-DE (CC BY-SA) and Wiktionary/Kaikki (CC BY-SA) sources. Document URLs, licenses, formats, fields. Note expected ~20k entries.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.531003261+01:00","updated_at":"2026-01-29T10:06:50.531003261+01:00"}
{"id":"learning-app-3i2","title":"0.1 Install CouchDB on production server (latest stable)","description":"Install CouchDB 3.x (latest stable) on production server. Enable service and verify installation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.52315276+01:00","updated_at":"2026-01-29T10:06:50.52315276+01:00"}
{"id":"learning-app-3lv","title":"Epic: Add base German dictionary with CouchDB sync and autocomplete","description":"Implement offline-first German dictionary (CEFR A1-C2, ~20k entries) with autocomplete and canonical prefill using CouchDB replication. Public read-only dictionary with Nginx rate limiting. Background sync on initial load. Database migration from local-db to user-db/device-db/dictionary-db.","notes":"See openspec/changes/add-base-dictionary/ for detailed spec and tasks.","status":"open","priority":2,"issue_type":"epic","assignee":"u473t8","owner":"shundeevegor@gmail.com","created_at":"2026-01-29T10:04:39.512223137+01:00","created_by":"Shundeev Egor","updated_at":"2026-01-29T10:04:39.512223137+01:00","external_ref":"https://github.com/u473t8/learning-app/issues/63"}
{"id":"learning-app-40r","title":"4.1 Implement background dictionary sync module that checks `dictionary-state` and triggers `PouchDB/replicate.from` on initial load","description":"Create sync module: check `dictionary-state` document. If not loaded, trigger `PouchDB/replicate.from` with `live: false` from public CouchDB. Listen for `complete` event to update state. Dev-only logging. Non-blocking, app usable during sync.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.53376122+01:00","updated_at":"2026-01-29T10:17:31.848807095+01:00","closed_at":"2026-01-29T10:17:31.848807095+01:00","close_reason":"Sync module created with PouchDB/replicate.from. Loader module created with init function that checks and starts sync. Public API: loaded?, syncing?, version."}
{"id":"learning-app-4nn","title":"6.1 Integrate autocomplete into add-word flow","description":"Integrate autocomplete into add-word input. Call `autocomplete` function as user types. Prefill input on exact normalized match. Show suggestions dropdown.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.535325132+01:00","updated_at":"2026-01-29T10:18:49.747669325+01:00","closed_at":"2026-01-29T10:18:49.747669325+01:00","close_reason":"Added dictionary.autocomplete require to vocabulary.cljs. Created handle-word-input function placeholder for HTMX integration."}
{"id":"learning-app-4wm","title":"Create examples.cljs client module","description":"New module with fetch-example (HTTP GET), sync-examples! (orchestrator), and online/offline detection","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:35:19.648629589+01:00","created_by":"u473t8","updated_at":"2026-01-09T12:40:55.051354296+01:00","closed_at":"2026-01-09T12:40:55.051354296+01:00","close_reason":"Implemented examples.cljs with parallel fetching (5 concurrent), network-only retries (2 attempts, 1s delay), and graceful degradation","dependencies":[{"issue_id":"learning-app-4wm","depends_on_id":"learning-app-6ld","type":"blocks","created_at":"2026-01-09T11:35:48.635956466+01:00","created_by":"u473t8"},{"issue_id":"learning-app-4wm","depends_on_id":"learning-app-73d","type":"blocks","created_at":"2026-01-09T11:35:48.760117989+01:00","created_by":"u473t8"}]}
{"id":"learning-app-4y9","title":"8.2 Smoke test: new install syncs dictionary, autocomplete suggestions appear, add-word prefills canonical value","description":"Manual smoke test: fresh install on clean device. Verify sync completes (check dev logs). Verify autocomplete works (type prefix, see suggestions). Verify add-word prefill (type \"der hund\", changes to \"der Hund\"). Verify app usable during sync.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.539232881+01:00","updated_at":"2026-01-29T10:27:57.062942006+01:00","closed_at":"2026-01-29T10:27:57.062942006+01:00","close_reason":"Created test/smoke-test.md with comprehensive end-to-end verification of dictionary sync, autocomplete, canonical prefill, and app usability during sync. Includes success criteria and failure conditions."}
{"id":"learning-app-4zd","title":"6.2 Initialize dictionary loader in application startup","description":"Update application initialization to call `dictionary.loader/init`. Ensure dictionary module loads on app start. No blocking, runs in background.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.535821488+01:00","updated_at":"2026-01-29T10:21:02.390194649+01:00","closed_at":"2026-01-29T10:21:02.390194649+01:00","close_reason":"Added dictionary.loader/init call in initialize-app! function in application.cljs. Dictionary loader will initialize on app start and start sync if dictionary not loaded."}
{"id":"learning-app-5c2","title":"Add server-admin skill (ssh hetzner)","description":"## What\nCreate a server-admin skill for SSH operations on the Hetzner server.\n\n## Requirements\n- Define allowed operations (inspect config, logs, systemd status, nginx status, security audit checks)\n- Require explicit user confirmation before any SSH command\n- Provide a safe, read-only default stance\n- List the skill in AGENTS.md with a short value statement\n\n## Acceptance Criteria\n- [ ] Skill created with clear scope and safety rules\n- [ ] SSH confirmation rule is explicit\n- [ ] Skill listed in AGENTS.md with benefit summary","status":"closed","priority":2,"issue_type":"task","assignee":"skill-creator","created_at":"2026-01-13T12:22:54.070744412+01:00","created_by":"u473t8","updated_at":"2026-01-13T13:50:55.038086592+01:00","closed_at":"2026-01-13T13:50:55.038101897+01:00","comments":[{"id":3,"issue_id":"learning-app-5c2","author":"u473t8","text":"Server-admin skill already created and updated: /.codex/skills/server-admin/SKILL.md (explicit approval required per SSH command; no task gate). Listed in AGENTS.md with value summary.","created_at":"2026-01-13T12:50:10Z"},{"id":4,"issue_id":"learning-app-5c2","author":"u473t8","text":"User approved closure.","created_at":"2026-01-13T12:50:41Z"}]}
{"id":"learning-app-64u","title":"8.1 Measure dictionary DB size and index overhead after import; document in `docs/dictionary-size.md`","description":"After dictionary import, measure: document count, database size (bytes), index size (bytes), entry count, form count. Document in `docs/dictionary-size.md` with performance metrics.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.538268363+01:00","updated_at":"2026-01-29T10:27:57.05771542+01:00","closed_at":"2026-01-29T10:27:57.05771542+01:00","close_reason":"Created docs/dictionary-size.md with measurement template for post-import metrics (document count, database size, index size, sync performance). Will be populated after actual dictionary import."}
{"id":"learning-app-671","title":"PWA Migration","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-09T11:33:42.22310497+01:00","created_by":"u473t8","updated_at":"2026-01-09T16:31:25.480735802+01:00","closed_at":"2026-01-09T16:31:25.480735802+01:00","close_reason":"PWA Migration complete: example sentence generation implemented with parallel fetching, graceful offline handling, and automatic sync on online events.","dependencies":[{"issue_id":"learning-app-671","depends_on_id":"learning-app-p3t","type":"blocks","created_at":"2026-01-09T11:37:13.600868246+01:00","created_by":"u473t8"}]}
{"id":"learning-app-6ld","title":"Add GET /api/examples backend endpoint","description":"Add endpoint that accepts ?word=\u003cgerman-word\u003e and returns example object from OpenAI via existing generate-one! function","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:35:18.997994008+01:00","created_by":"u473t8","updated_at":"2026-01-09T11:42:35.682699651+01:00","closed_at":"2026-01-09T11:42:35.682699651+01:00","close_reason":"Added /api/examples GET endpoint to core.clj"}
{"id":"learning-app-73d","title":"Add example storage functions to vocabulary.cljs","description":"Add words-without-examples, save-example, get-example functions to work with example documents in PouchDB","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:35:19.32462936+01:00","created_by":"u473t8","updated_at":"2026-01-09T11:45:25.366149478+01:00","closed_at":"2026-01-09T11:45:25.366149478+01:00","close_reason":"Added example storage functions and service worker API routing"}
{"id":"learning-app-87c","title":"2.1 Split client storage into `user-db`, `device-db`, and `dictionary-db`; add a one-time migration from `local-db`","description":"Implement migration logic to copy `vocab` and `review` docs to `user-db`, `task` and `example` docs to `device-db`. Create empty `dictionary-db`. Add migration marker document. Keep `local-db` for safety.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.532679004+01:00","updated_at":"2026-01-29T10:14:42.774464061+01:00","closed_at":"2026-01-29T10:14:42.774464061+01:00","close_reason":"Database migration module created to split local-db into user-db, device-db, and dictionary-db. Copies docs by type and creates migration marker. TODO: Delete old-db after confirmation."}
{"id":"learning-app-94y","title":"Add network-only routing for /api/* in service worker","description":"Modify sw.cljs to route /api/* requests directly to network without caching","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:35:19.974105048+01:00","created_by":"u473t8","updated_at":"2026-01-09T11:45:25.3740016+01:00","closed_at":"2026-01-09T11:45:25.3740016+01:00","close_reason":"Added example storage functions and service worker API routing"}
{"id":"learning-app-9fe","title":"7.2 Create test documentation for autocomplete scenarios (prefix lookup, exact match, case insensitivity, performance)","description":"Create test documentation: prefix lookup returns suggestions, exact match prefill works, case-insensitive matching, diacritic handling, performance measurement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.536796499+01:00","updated_at":"2026-01-29T10:22:58.117078779+01:00","closed_at":"2026-01-29T10:22:58.117078779+01:00","close_reason":"Created test/autocomplete.md with test scenarios for prefix lookup, exact match, case insensitivity, diacritic handling, and performance."}
{"id":"learning-app-a0d","title":"1.2 Implement a dictionary ingestion script that downloads source data from MERLIN-DE and Wiktionary/Kaikki, outputs JSONL for `dictionary-entry` and `dictionary-form` plus a manifest (counts, bytes, checksum)","description":"Create Clojure/Node.js script to download, process, and merge MERLIN-DE and Wiktionary/Kaikki data. Output `entries.jsonl`, `forms.jsonl`, and `manifest.json`. Include download logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.531604467+01:00","updated_at":"2026-01-29T10:14:00.008651508+01:00","closed_at":"2026-01-29T10:14:00.008651508+01:00","close_reason":"Ingestion script skeleton created with TODOs for download and processing logic. Import script created."}
{"id":"learning-app-agg","title":"7.3 Create regression checklist for existing flows after database split","description":"Create regression checklist: add word flow, list words, lesson flow, examples fetch. Verify all work correctly with new database structure.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.537457014+01:00","updated_at":"2026-01-29T10:24:49.291554644+01:00","closed_at":"2026-01-29T10:24:49.291554644+01:00","close_reason":"Created test/regression-checklist.md with regression scenarios for add-word, list words, lesson, and examples flows after database split."}
{"id":"learning-app-anu","title":"[READY][UI] Update lesson UI for trial-based system","description":"## What\nUpdate lesson UI components in application.cljs to work with new trial-based data model.\n\n## Components to Update\n\n### lesson-challenge\nCurrent:\n```clojure\n(defn- lesson-challenge [{:keys [word example]}]\n  (if example\n    [:div ... 'Переведите предложение на немецкий']\n    [:div ... 'Переведите слово на немецкий']))\n```\n\nNew signature:\n```clojure\n(defn- lesson-challenge [{:keys [word trial-type]}]\n  ;; trial-type is :word or :example\n  ;; If :word - show word.translation, prompt 'Переведите слово'\n  ;; If :example - show word.example.translation, prompt 'Переведите предложение')\n```\n\n### lesson-page\nUpdate to use new lesson structure:\n- Get current-trial from lesson\n- Find word by current-trial.word-id\n- Calculate progress: (- total remaining) / total * 100\n- Pass trial-type to lesson-challenge\n\n### Progress calculation\nCurrent: current-index / word-count\nNew: (count trials - count remaining-trials) / (count trials) * 100\n\n### lesson-success / lesson-error\n- is-last? becomes is-finished? (check if remaining-trials will be empty)\n\n## Acceptance Criteria\n- [ ] Word trials show 'Переведите слово на немецкий'\n- [ ] Example trials show 'Переведите предложение на немецкий'\n- [ ] Progress bar shows % of completed trials\n- [ ] 'ЗАКОНЧИТЬ' button when all trials passed\n- [ ] Works with varying trial counts (e.g., 5 trials if one word has no example)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T08:31:10.823147856+01:00","created_by":"u473t8","updated_at":"2026-01-10T16:29:38.498188929+01:00","closed_at":"2026-01-10T16:29:38.498188929+01:00","close_reason":"Updated UI for trial-based system: lesson-challenge with example-trial? helper, progress from trials count, hybrid partial HTML (PATCH check returns footer only), trial type constants as strings for PouchDB. Fixed example rotation to be fire-and-forget.","dependencies":[{"issue_id":"learning-app-anu","depends_on_id":"learning-app-jet","type":"blocks","created_at":"2026-01-10T08:42:14.730055517+01:00","created_by":"u473t8"},{"issue_id":"learning-app-anu","depends_on_id":"learning-app-15h","type":"blocks","created_at":"2026-01-10T08:42:14.900390792+01:00","created_by":"u473t8"}]}
{"id":"learning-app-cas","title":"0.2 Configure admin user with systemd encrypted credentials","description":"Create admin user with secure password. Store password via systemd encrypted creds. Load in application via environment variable.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.527735803+01:00","updated_at":"2026-01-29T10:06:50.527735803+01:00"}
{"id":"learning-app-cse","title":"Wire up example sync on app startup and online events","description":"Trigger sync-examples! when app initializes online and when browser comes online","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:35:20.330058511+01:00","created_by":"u473t8","updated_at":"2026-01-09T16:29:30.73421187+01:00","closed_at":"2026-01-09T16:29:30.73421187+01:00","close_reason":"Wired up sync-examples! on activate and online events. Removed retries - rely on online events for retry at higher level.","dependencies":[{"issue_id":"learning-app-cse","depends_on_id":"learning-app-4wm","type":"blocks","created_at":"2026-01-09T11:35:48.888555709+01:00","created_by":"u473t8"}]}
{"id":"learning-app-cxc","title":"1.3 Implement a CouchDB import pipeline that reads JSONL files and imports to `dictionary-db` with size metrics","description":"Create script to read JSONL files and bulk import to CouchDB `dictionary-db`. Create `dictionary-state` document with version and checksum. Measure and log database size.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.532174032+01:00","updated_at":"2026-01-29T10:14:00.013358988+01:00","closed_at":"2026-01-29T10:14:00.013358988+01:00","close_reason":"Import script created to read JSONL files and bulk import to CouchDB dictionary-db."}
{"id":"learning-app-dtm","title":"Create lesson page UI with challenge display","description":"Replace placeholder /lesson route with actual lesson UI showing word/example challenges","notes":"Reviewed lesson UI in src/client/application.cljs. Lesson page, challenge display, input, success/error footer, and /lesson routes are implemented and wired to HTMX; no placeholder remains.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T17:01:32.363688492+01:00","created_by":"u473t8","updated_at":"2026-01-09T18:31:11.621572011+01:00","closed_at":"2026-01-09T18:31:11.621572011+01:00","close_reason":"Lesson UI already implemented; placeholder replaced with full lesson flow UI.","dependencies":[{"issue_id":"learning-app-dtm","depends_on_id":"learning-app-ebd","type":"blocks","created_at":"2026-01-09T17:01:45.049782232+01:00","created_by":"u473t8"}]}
{"id":"learning-app-ebd","title":"Restore lesson functionality for PWA","description":"Implement word learning lesson flow: select 3 words with examples, user translates word/example, create review docs, refresh examples on success, show Finish on completion","notes":"Updated /lesson/finish to fetch actual word count via vocabulary/words-count before rendering home.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-09T17:01:13.334733383+01:00","created_by":"u473t8","updated_at":"2026-01-09T18:34:16.685018006+01:00","closed_at":"2026-01-09T18:34:16.685018006+01:00","close_reason":"Lesson flow UI and routes already implemented; fixed /lesson/finish to render home with correct word count."}
{"id":"learning-app-eq6","title":"0.4 Configure Nginx for CouchDB access with rate limiting","description":"Configure Nginx to proxy `/db/*` to CouchDB. Add rate limiting: 10 req/s, burst 10. Set timeouts and WebSocket support.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.529751805+01:00","updated_at":"2026-01-29T10:06:50.529751805+01:00"}
{"id":"learning-app-fil","title":"Fetch example when user adds new word","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T16:44:00.965984556+01:00","created_by":"u473t8","updated_at":"2026-01-09T16:48:58.009203186+01:00","closed_at":"2026-01-09T16:48:58.009203186+01:00","close_reason":"Added async example fetch in add-word-interceptor (fire-and-forget)"}
{"id":"learning-app-g4q","title":"[READY][CODE] Refactor lesson data model for trial-based system","description":"## What\nUpdate the lesson document structure to support trial-based learning with random selection.\n\n## Current Structure (docs/data-model.md)\n```clojure\n{:_id 'lesson'\n :type 'lesson'\n :current-index 0           ;; sequential index\n :last-correct? nil\n :started-at '\u003cISO\u003e'\n :words [{:id :value :translation :retention-level :example}]}\n```\n\n## New Structure\n```clojure\n{:_id 'lesson'\n :type 'lesson'\n :started-at '\u003cISO\u003e'\n :words [{:id :value :translation :retention-level :example}]  ;; reference data\n :trials [{:word-id '\u003cid\u003e' :type :word} {:word-id '\u003cid\u003e' :type :example}...]  ;; all trials\n :remaining-trials [{:word-id '\u003cid\u003e' :type :word}...]  ;; unpassed trials\n :current-trial {:word-id '\u003cid\u003e' :type :word}  ;; or nil\n :last-result {:correct? bool :correct-answer '\u003ctext\u003e'}}  ;; or nil\n```\n\n## Trial Generation Logic\nFor each word in words:\n1. Always add {:word-id id :type :word}\n2. If word has :example, also add {:word-id id :type :example}\n\n## Implementation\n- Update docs/data-model.md with new structure\n- Update lesson-doc function in lesson.cljs\n- Trials should be generated at lesson start\n\n## Acceptance Criteria\n- [ ] docs/data-model.md updated\n- [ ] lesson-doc creates correct structure\n- [ ] Trials include both word and example (when available)\n- [ ] remaining-trials starts as copy of all trials","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T08:30:44.669136801+01:00","created_by":"u473t8","updated_at":"2026-01-10T09:38:50.423336457+01:00","closed_at":"2026-01-10T09:38:50.423336457+01:00","close_reason":"Updated docs/data-model.md with trial-based lesson structure. Updated lesson.cljs with generate-trials, remove-trial, find-word helpers and new lesson-doc structure. Build compiles with 0 warnings.","dependencies":[{"issue_id":"learning-app-g4q","depends_on_id":"learning-app-jet","type":"blocks","created_at":"2026-01-10T08:42:14.577508106+01:00","created_by":"u473t8"}]}
{"id":"learning-app-hhg","title":"Production deploy runbook + preflight checks","description":"## What\nCreate a solid production runbook that covers fresh server bootstrap, deploy, rollback, and secret rotation.\n\n## Requirements\n- Fresh server bootstrap: base OS packages, users/SSH, install infra deb, enable services\n- Deploy workflow: CI/CD artifact delivery + restart behavior\n- Secret rotation: OpenAI token update and service reload\n- Preflight checks: systemd units, certbot timer, nginx config test, artifact path permissions\n- Keep steps minimal, reproducible, and aligned with current infra files\n\n## Acceptance Criteria\n- [ ] Runbook covers fresh server bootstrap end-to-end\n- [ ] Runbook documents secret rotation (OpenAI token) and validation\n- [ ] Preflight checklist or script exists and is documented","status":"closed","priority":2,"issue_type":"task","assignee":"devops-infra","created_at":"2026-01-12T23:39:36.207277719+01:00","created_by":"u473t8","updated_at":"2026-01-13T11:41:52.024978216+01:00","closed_at":"2026-01-13T11:41:52.025099277+01:00","comments":[{"id":5,"issue_id":"learning-app-hhg","author":"u473t8","text":"Added production runbook to docs/server_configuration.md: fresh server bootstrap, deploy flow, rollback, OpenAI secret rotation, preflight checklist. Covers required packages and systemd/nginx/certbot checks.","created_at":"2026-01-12T22:58:09Z"},{"id":6,"issue_id":"learning-app-hhg","author":"u473t8","text":"Cleaned up infra/production/DEBIAN/postinst: added bash shebang, set -euo pipefail, fixed OpenAI creds indentation, ensured /etc/credstore.encrypted exists.","created_at":"2026-01-13T08:57:54Z"},{"id":7,"issue_id":"learning-app-hhg","author":"u473t8","text":"Removed local production simulation artifacts (infra/local-prod, infra/local-ci, docs/local-prod.md, docs/local-ci.md) and cleaned runbook reference to LEARNING_APP_SKIP_CREDS.","created_at":"2026-01-13T09:05:22Z"},{"id":8,"issue_id":"learning-app-hhg","author":"u473t8","text":"User approved closure.","created_at":"2026-01-13T10:41:38Z"}]}
{"id":"learning-app-hoj","title":"0.3 Create and configure `dictionary-db` with public read-only security","description":"Create `dictionary-db` database. Set security: public read access, admin write only. No authentication required for sync.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.528740182+01:00","updated_at":"2026-01-29T10:06:50.528740182+01:00"}
{"id":"learning-app-ixq","title":"[EPIC] UI/UX focus, keyboard flow, and layout fixes","description":"## Goal\nFix focus behavior, keyboard flows, async example creation, and layout quirks across home, words list, and lesson screens.\n\n## Why\nThese issues slow entry, reduce accessibility, and cause confusing layout on different viewports.\n\n## Success Criteria\n- Focus/keyboard behavior matches requested flow on home and lesson screens\n- Example creation does not block word creation\n- Lesson/words UI layout and empty states align with expectations\n- Logo placement consistent on mobile and desktop","notes":"Implementation summary: resolved focus/keyboard flow issues, improved lesson/words layouts and empty states, kept logo pinned across viewports, and ensured lesson UI renders from persisted state on reload.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T20:26:27.482271585+01:00","created_by":"u473t8","updated_at":"2026-01-11T23:47:40.02814228+01:00","closed_at":"2026-01-11T23:47:40.02814228+01:00","close_reason":"All child tasks complete; focus/keyboard flow and UI layout fixes implemented and reviewed."}
{"id":"learning-app-ixq.2","title":"[IN-PROGRESS][UI] Layout tweaks for home, words list, and lesson screens","description":"## What\nAdjust layout and placement for lesson button, empty states, and logo to match UX expectations across viewport sizes.\n\n## Requirements\n- Lesson screen: action button sits directly below the answer input\n- Empty lesson state: add-words CTA centered (match empty words list layout)\n- Words list: hide start-lesson button when list is empty\n- Words list: start-lesson button not full width on wide screens; allow full width on mobile\n- Logo: Sprecha logo pinned to top-left of viewport on mobile and desktop\n\n## Acceptance Criteria\n- [ ] Lesson action button renders below the answer input\n- [ ] Empty lesson screen CTA centered\n- [ ] No start-lesson button when words list is empty\n- [ ] Start-lesson button uses constrained width on wide screens, full width on mobile\n- [ ] Logo remains top-left across viewport sizes","notes":"Implementation summary: centered empty /words layout to match /lesson, hid header/back/search/footer in empty state, ensured logo stays fixed top-left, constrained start-lesson button width on wide screens, and adjusted lesson/words spacing to avoid logo overlap.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T20:27:07.871060125+01:00","created_by":"u473t8","updated_at":"2026-01-11T23:47:00.494151642+01:00","closed_at":"2026-01-11T23:24:01.073013505+01:00","close_reason":"Adjusted layout for lesson CTA, empty states, logo placement, and words list footer behavior; UI reviewed and approved.","dependencies":[{"issue_id":"learning-app-ixq.2","depends_on_id":"learning-app-ixq","type":"parent-child","created_at":"2026-01-10T20:27:07.874742412+01:00","created_by":"u473t8"}]}
{"id":"learning-app-ixq.3","title":"[IN-PROGRESS][CODE] Focus flows, keyboard actions, and async example creation","description":"## What\nImplement focus management and keyboard behavior for home and lesson flows, make example creation non-blocking, and persist lesson trial state in the lesson resource.\n\n## Requirements\n- Home: on page load, focus German word input\n- Home: TAB or ENTER in German input moves focus to translation input\n- TAB behavior remains default (include shift+tab), add handler only for ENTER and normal focus flow\n- Home: ENTER in translation input triggers word creation\n- Add-word flow: fire example creation request only after word creation succeeds; do not block word creation handler on example request\n- Lesson start: focus answer input on load\n- Lesson: submit answer with Ctrl+Enter\n- Lesson: after submit, focus NEXT or FINISH button only after it appears\n- Lesson: persist per-trial state inside the lesson resource (e.g., :current-answer) so the view can be reconstructed unambiguously\n- Lesson: reload does not change the page view if the lesson resource has not changed; success/fail footer with Next button should reappear on reload\n\n## Acceptance Criteria\n- [ ] Initial focus set to German word input on home load\n- [ ] TAB behavior unchanged; ENTER in German input moves focus to translation input\n- [ ] ENTER in translation input submits new word\n- [ ] Example creation fires after successful word creation and does not block handler\n- [ ] Lesson answer input focused on start\n- [ ] Ctrl+Enter submits lesson answer\n- [ ] Focus lands on NEXT/FINISH after those buttons appear\n- [ ] Lesson resource stores per-trial state (e.g., :current-answer) used to reconstruct the view\n- [ ] Reload preserves success/fail view when lesson resource is unchanged","notes":"Implementation summary: added focus/keyboard flows for home and lesson, async example creation after word save, persisted lesson trial result state for reloads, and refactored lesson state naming (get-state/initial-state) with UI rendering from persisted state.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T20:27:15.764952043+01:00","created_by":"u473t8","updated_at":"2026-01-11T23:47:17.038529751+01:00","closed_at":"2026-01-11T22:28:44.444176201+01:00","close_reason":"Implemented focus/keyboard behaviors, async example flow, lesson state persistence + reload footer, updated naming to state/get-state, and addressed review feedback.","dependencies":[{"issue_id":"learning-app-ixq.3","depends_on_id":"learning-app-ixq","type":"parent-child","created_at":"2026-01-10T20:27:15.76731216+01:00","created_by":"u473t8"}]}
{"id":"learning-app-j3x","title":"[EPIC] Merge readiness for deploy","description":"## Goal\nEnsure merges to master deploy safely via CI/CD by hardening real production runbooks and preflight checks (no local sandbox).\n\n## Why\nReduce operational risk with clear, verified deployment steps and guardrails instead of maintaining a heavy local prod emulator.\n\n## Success Criteria\n- Deploy pipeline risks reviewed with concrete mitigations\n- Production deployment runbook updated and complete\n- Preflight checks documented or scripted for deploy readiness\n\n## Tasks\n- [INFRA] Analyze merge risks for CI/CD + systemd/nginx deploy\n- [INFRA] Production deploy runbook + preflight checks","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-12T17:37:55.75627676+01:00","created_by":"u473t8","updated_at":"2026-01-12T23:54:00.789052894+01:00","dependencies":[{"issue_id":"learning-app-j3x","depends_on_id":"learning-app-hhg","type":"blocks","created_at":"2026-01-12T23:39:49.414288266+01:00","created_by":"u473t8"}]}
{"id":"learning-app-j3x.2","title":"Analyze merge deploy risks","description":"## What\nReview what can break on merge to master for the CI/CD deploy pipeline and Ubuntu systemd/nginx runtime.\n\n## Requirements\n- Compare branch vs master deploy-critical files (build.clj, deploy.yaml, infra/production)\n- Identify failure modes (artifact build, restart, certs, env, permissions, nginx)\n- Provide mitigations and pre-merge checklist\n\n## Acceptance Criteria\n- [ ] Risks listed with severity and mitigations\n- [ ] Pre-merge checklist provided\n","notes":"Fixes applied: added build.clj and infra/** to deploy workflow trigger; systemd run unit now uses WorkingDirectory=/opt/learning-app and absolute jar path; environment file now reads /etc/environment.d/learning-app.conf (with fallback /etc/learning-app/environment); OPENAI_API_KEY exported from credential; certbot domain aligned to sprecha.de/www.sprecha.de in postinst.","status":"closed","priority":2,"issue_type":"task","assignee":"devops-infra","created_at":"2026-01-12T17:38:27.744388092+01:00","created_by":"u473t8","updated_at":"2026-01-12T23:09:06.268059296+01:00","closed_at":"2026-01-12T23:09:06.268084505+01:00","dependencies":[{"issue_id":"learning-app-j3x.2","depends_on_id":"learning-app-j3x","type":"parent-child","created_at":"2026-01-12T17:38:27.74581561+01:00","created_by":"u473t8"}],"comments":[{"id":9,"issue_id":"learning-app-j3x.2","author":"u473t8","text":"Merge risk analysis (master -\u003e this branch):\n\n- CI/CD triggers: workflow paths do not include resources/** or shadow-cljs outputs, so changes to static assets may not deploy (pipeline only builds uberjar). If client JS/CSS changes require a release build, it will be missed.\n- Deploy restart path: pipeline only mv's the jar; it relies on learning-app-restart.path being enabled. If that unit is disabled/missing on server, the app won't restart and old code keeps running.\n- Permissions: deploy user must have write access to /opt/learning-app/learning-app.jar.tmp; otherwise scp/mv fails.\n- Secrets: run.service expects OpenAI key via systemd creds or env; if /etc/credstore.encrypted/open-ai-key is missing, service start fails.\n- Infra deb install: postinst runs certbot; if certbot is not installed on a fresh server, postinst fails. certbot is not in deb Depends.\n- Nginx: reload must target nginx; older postinst typo (nginx-mode) would fail on fresh installs if not updated.\n- Domain mismatch: certbot must use sprecha.de/www.sprecha.de; wrong domains cause issuance failure.\n- Docs mismatch: docs/server_configuration.md still references no certbot service; may mislead ops during rollback/restore.\n\nIf needed: add certbot to deb Depends, include resources/** in workflow paths, and confirm systemd path unit enabled on server.","created_at":"2026-01-12T21:17:41Z"},{"id":10,"issue_id":"learning-app-j3x.2","author":"u473t8","text":"Addressed merge risks: workflow now includes resources/** in deploy triggers; infra deb Depends adds certbot for fresh installs; docs/server_configuration.md updated certbot domains and notes certbot timer/service. Remaining operational checks: ensure deployer has write access to /opt/learning-app and restart.path is enabled on server (postinst already enables it).","created_at":"2026-01-12T21:56:20Z"},{"id":11,"issue_id":"learning-app-j3x.2","author":"u473t8","text":"Updated OpenAI credential naming: run.service now uses OPENAI_API_KEY_PATH and LoadCredentialEncrypted openai_api_key; postinst/postrm use /etc/credstore.encrypted/openai_api_key.","created_at":"2026-01-12T22:06:39Z"},{"id":12,"issue_id":"learning-app-j3x.2","author":"u473t8","text":"User approved closure.","created_at":"2026-01-12T22:08:53Z"}]}
{"id":"learning-app-j3x.3","title":"Local prod deploy sandbox","description":"## What\nCreate a local Ubuntu container flow that installs the infra deb and runs the app behind nginx with HTTPS for production-like validation.\n\n## Requirements\n- Use Ubuntu container + systemd (or minimal substitute) to run nginx and app\n- Automate deb install (non-interactive), consume secrets from env\n- One-liner to start and access https://sprecha.localtest:443\n\n## Acceptance Criteria\n- [ ] One-liner runs the stack\n- [ ] HTTPS works with local certs\n- [ ] App reachable at sprecha.localtest:443\n","notes":"Implemented local prod-like deploy: ubuntu+systemd container with nginx and app jar, infra deb built and installed non-interactively (LEARNING_APP_SKIP_CREDS=1), mkcert HTTPS for sphrecha.localtest, one-liner ./infra/local-prod/up.sh. Added docs in docs/local-prod.md.","status":"closed","priority":2,"issue_type":"task","assignee":"devops-infra","created_at":"2026-01-12T17:38:41.566936458+01:00","created_by":"u473t8","updated_at":"2026-01-12T23:39:04.041724644+01:00","closed_at":"2026-01-12T23:39:04.041757718+01:00","dependencies":[{"issue_id":"learning-app-j3x.3","depends_on_id":"learning-app-j3x","type":"parent-child","created_at":"2026-01-12T17:38:41.569165295+01:00","created_by":"u473t8"}],"comments":[{"id":13,"issue_id":"learning-app-j3x.3","author":"u473t8","text":"Removed legacy local-deploy sandbox (infra/local-deploy + docs/local-deploy.md) in favor of prod-like local-prod + local-ci flow.","created_at":"2026-01-12T22:21:08Z"},{"id":14,"issue_id":"learning-app-j3x.3","author":"u473t8","text":"Replanning: local-prod sandbox is no longer aligned with the chosen approach (focus on prod runbooks + preflight checks). Closing this task as superseded.","created_at":"2026-01-12T22:38:48Z"}]}
{"id":"learning-app-j3x.4","title":"CI/CD emulation runbook","description":"## What\nProvide a local CI/CD emulation path (container or runbook) that mirrors GitHub Actions build+deploy.\n\n## Requirements\n- Emulate build (clojure -T:build uber)\n- Emulate artifact transfer and restart\n- Document commands and expected outputs\n\n## Acceptance Criteria\n- [ ] Local CI/CD emulation documented\n- [ ] Covers failure modes and expected artifacts\n","status":"closed","priority":2,"issue_type":"task","assignee":"devops-infra","created_at":"2026-01-12T17:38:58.226612602+01:00","created_by":"u473t8","updated_at":"2026-01-12T21:29:23.562404417+01:00","closed_at":"2026-01-12T21:29:23.562417625+01:00","dependencies":[{"issue_id":"learning-app-j3x.4","depends_on_id":"learning-app-j3x","type":"parent-child","created_at":"2026-01-12T17:38:58.228195993+01:00","created_by":"u473t8"}],"comments":[{"id":15,"issue_id":"learning-app-j3x.4","author":"u473t8","text":"Implemented local CI/CD emulation runbook + script: added infra/local-ci/run.sh (dockerized clojure build + tmp/mv artifact) and docs/local-ci.md with one-liner, expected artifacts, validation, and failure modes. Ready for review.","created_at":"2026-01-12T20:12:49Z"},{"id":16,"issue_id":"learning-app-j3x.4","author":"u473t8","text":"Updated local CI/CD emulation + local-prod flow per requirements: added infra/local-prod/server-up.sh (server-only, installs infra deb) and split up.sh to call server-up + artifact delivery. Fixed infra/production/DEBIAN/postinst reload (nginx) and daemon-reload typos. docs/local-prod.md now documents two one-liners; docs/local-ci.md clarifies artifacts (uberjar bundles static assets).","created_at":"2026-01-12T20:27:54Z"},{"id":17,"issue_id":"learning-app-j3x.4","author":"u473t8","text":"User approved: uberjar-only artifact is enough. Closing task.","created_at":"2026-01-12T20:29:09Z"}]}
{"id":"learning-app-jet","title":"[EPIC] Restore lesson flow with trial-based system","description":"## Goal\nRestore vocabulary lesson functionality with a proper trial-based system where words and examples are separate challenges, plus updated lesson route behavior.\n\n## Why\nCurrent implementation has sequential word-based flow and inconsistent route behaviors. Need random trial selection from unpassed trials and correct GET/PATCH semantics.\n\n## Success Criteria\n- Lesson starts with 3 words + their examples (if available) = up to 6 trials\n- Random trial selection from unpassed trials\n- Word trials show 'Переведите слово', example trials show 'Переведите предложение'\n- Failed trials stay in unpassed pool and can appear again\n- Passed trials removed from pool\n- On example success: fetch new example, delete old\n- Progress bar shows % of passed trials and fills to 100% when all passed\n- 'Закончить' button when all trials passed\n- GET lesson route starts a lesson if it hasn't started yet\n- If lesson not started and has no words, page shows 'Добавить слова' button\n- PATCH lesson route returns only HTML fragments\n- POST lesson route is removed or unused (confirm removal)\n\n## Tasks\n- [CODE] Refactor lesson data model for trial-based system\n- [CODE] Update lesson.cljs with new trial logic\n- [UI] Update lesson UI for word vs example display\n- [CODE] Update lesson routes (GET/PATCH/POST behavior)\n- [UI] Update lesson UI for empty lesson action + progress bar state","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-10T08:30:29.966896299+01:00","created_by":"u473t8","updated_at":"2026-01-10T19:07:20.156541386+01:00","closed_at":"2026-01-10T19:07:20.156541386+01:00","close_reason":"All planned tasks completed: trial-based lesson data model, lesson logic, updated UI, route behavior, empty state, progress behavior."}
{"id":"learning-app-jet.2","title":"[IN-PROGRESS][CODE] Update lesson routes behavior","description":"## What\nAlign lesson GET/PATCH/POST routes with the updated trial-based flow and UI needs.\n\n## Requirements\n- GET lesson route: if lesson not started, start it automatically\n- If lesson not started and there are no words, respond with view that shows 'Добавить слова' action\n- PATCH lesson route returns HTML fragments only (no full layout)\n- POST lesson route removed or left unused (confirm whether to delete or keep no-op)\n- Progress calculation feeds UI so 100% when all trials passed\n- Confirm exact route paths/handlers and response shape used by frontend\n\n## Acceptance Criteria\n- [ ] GET route starts lesson when needed\n- [ ] Empty lesson state is correctly handled\n- [ ] PATCH route returns fragments only\n- [ ] POST route disposition agreed and reflected in code\n- [ ] Progress reaches 100% when complete","notes":"Clarified by user: show 'Добавить слова' only when zero words; if words exist, GET should start lesson. POST route should be removed. PATCH returns fragments for: footer (успех/ошибка/правильный ответ), new trials, progress bar, and button (проверить/дальше/закончить).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T17:08:40.281990854+01:00","created_by":"u473t8","updated_at":"2026-01-10T17:38:21.921047626+01:00","closed_at":"2026-01-10T17:38:21.921047626+01:00","close_reason":"Updated /lesson GET/PATCH behavior, removed POST, added fragment-only PATCH updates (footer/challenge/progress), and handled empty state + progress updates.","dependencies":[{"issue_id":"learning-app-jet.2","depends_on_id":"learning-app-jet","type":"parent-child","created_at":"2026-01-10T17:08:40.283909111+01:00","created_by":"u473t8"}]}
{"id":"learning-app-jet.3","title":"[IN-PROGRESS][UI] Empty lesson state + progress completion","description":"## What\nUpdate lesson UI to handle empty lesson action and ensure progress bar reaches 100% on completion.\n\n## Requirements\n- Show 'Добавить слова' button when lesson not started and has no words\n- Progress bar visually fills to 100% when all trials are passed\n- Align with updated GET/PATCH route responses and fragment-only updates\n- Confirm where the empty state appears (full page vs fragment)\n\n## Acceptance Criteria\n- [ ] Empty lesson state shows the correct action\n- [ ] Progress bar reaches 100% at completion\n- [ ] UI works with fragment responses","notes":"Moved home__footer-actions inside home__panel--add so Start Lesson button aligns with panel (matches CSS .home__panel--add .home__footer-actions). App HTML in browser still shows old structure, likely SW/cache or backend reload needed to verify.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T17:08:54.458310598+01:00","created_by":"u473t8","updated_at":"2026-01-10T19:05:54.885867594+01:00","closed_at":"2026-01-10T19:05:54.885867594+01:00","close_reason":"UI empty state and progress completion verified; lesson flow interactions reviewed. Layout shift investigation reverted; no design change kept.","dependencies":[{"issue_id":"learning-app-jet.3","depends_on_id":"learning-app-jet","type":"parent-child","created_at":"2026-01-10T17:08:54.459895341+01:00","created_by":"u473t8"}]}
{"id":"learning-app-jws","title":"5.1 Add dictionary autocomplete using `dictionary-form` index and prefill on exact normalized match","description":"Create autocomplete module: create index on `dictionary-form.normalized-value`. Implement prefix lookup with regex. Implement exact match prefill for canonical value. Handle case insensitivity and diacritics.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.53480174+01:00","updated_at":"2026-01-29T10:18:02.020701126+01:00","closed_at":"2026-01-29T10:18:02.020701126+01:00","close_reason":"Autocomplete module created with index creation, prefix lookup, exact match prefill, and case/diacritic handling."}
{"id":"learning-app-k4g","title":"4.2 Implement dictionary loader with public API for initialization and status checks","description":"Create loader module: `init` function to check and trigger sync. Public API: `loaded?`, `syncing?`, `version`. Initialize automatically on app start.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.534290499+01:00","updated_at":"2026-01-29T10:17:31.8434777+01:00","closed_at":"2026-01-29T10:17:31.8434777+01:00","close_reason":"Loader module created with init function and public API functions."}
{"id":"learning-app-p3t","title":"Implement example sentence generation","description":"When online, fetch example sentences from backend (OpenAI) for vocabulary words and store in PouchDB. Handle offline gracefully by detecting online state and syncing missing examples sequentially.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T11:34:04.961492606+01:00","created_by":"u473t8","updated_at":"2026-01-09T16:30:46.463709906+01:00","closed_at":"2026-01-09T16:30:46.463709906+01:00","close_reason":"All subtasks completed: client module, backend endpoint, storage functions, API routing, and event wiring are all implemented.","dependencies":[{"issue_id":"learning-app-p3t","depends_on_id":"learning-app-6ld","type":"blocks","created_at":"2026-01-09T11:37:12.988439084+01:00","created_by":"u473t8"},{"issue_id":"learning-app-p3t","depends_on_id":"learning-app-73d","type":"blocks","created_at":"2026-01-09T11:37:13.114405476+01:00","created_by":"u473t8"},{"issue_id":"learning-app-p3t","depends_on_id":"learning-app-4wm","type":"blocks","created_at":"2026-01-09T11:37:13.236624357+01:00","created_by":"u473t8"},{"issue_id":"learning-app-p3t","depends_on_id":"learning-app-94y","type":"blocks","created_at":"2026-01-09T11:37:13.35484641+01:00","created_by":"u473t8"},{"issue_id":"learning-app-p3t","depends_on_id":"learning-app-cse","type":"blocks","created_at":"2026-01-09T11:37:13.474853567+01:00","created_by":"u473t8"}]}
{"id":"learning-app-pmo","title":"0.5 Document CouchDB infrastructure in `docs/ops/server-configuration.md`","description":"Update server configuration documentation with CouchDB installation, admin setup, database security, and Nginx proxy configuration. Update preflight checklist.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T10:06:50.530393033+01:00","updated_at":"2026-01-29T10:10:31.832807398+01:00","closed_at":"2026-01-29T10:10:31.832807398+01:00","close_reason":"Documentation updated in docs/ops/server-configuration.md with CouchDB installation, configuration, Nginx proxy, and troubleshooting sections"}
{"id":"learning-app-q38","title":"Add docs-maintainer skill","description":"## What\nCreate a docs-maintainer skill for documentation structure, link hygiene, and consistency.\n\n## Requirements\n- Define when to use the skill and scope boundaries\n- Include checklist for link updates and doc moves\n- Require English-only docs\n- List the skill in AGENTS.md with a short value statement\n\n## Acceptance Criteria\n- [ ] Skill created and added to .codex/skills\n- [ ] Skill listed in AGENTS.md with benefit summary\n- [ ] Guidance includes link update requirements","status":"closed","priority":2,"issue_type":"task","assignee":"skill-creator","created_at":"2026-01-13T12:22:19.404819246+01:00","created_by":"u473t8","updated_at":"2026-01-13T13:25:34.992246653+01:00","closed_at":"2026-01-13T13:25:34.992251762+01:00","comments":[{"id":18,"issue_id":"learning-app-q38","author":"u473t8","text":"Created docs-maintainer skill and server-admin skill; added skills list with benefits to AGENTS.md.","created_at":"2026-01-13T11:59:51Z"},{"id":19,"issue_id":"learning-app-q38","author":"u473t8","text":"User approved closure.","created_at":"2026-01-13T12:25:19Z"}]}
{"id":"learning-app-t3y","title":"[READY][CODE] Fix empty state when last word deleted from /words page","description":"## What\nWhen user deletes the last word from /words page, the empty state shows correctly inside #word-list, but the search form and 'Начать урок' button remain visible. They should be hidden when there are no words.\n\n## Current Behavior\n1. Delete handler returns status 200\n2. hx-swap='delete' removes the \u003cli\u003e item\n3. Custom event 'words-changed' triggers refetch targeting #word-list\n4. Empty state renders inside \u003cul\u003e, but surrounding structure (search, footer) persists\n\n## Root Cause\nThe words-page is a static def that always includes search form and footer. Only #word-list content is updated on deletion.\n\n## Proposed Solution\nUse HX-Retarget header approach:\n1. Modify delete-word-interceptor to return word count after deletion\n2. Create words-page-empty variant without search/footer (or with hidden/disabled state)\n3. Modify DELETE /words handler: if word count becomes 0, return HX-Retarget/#app header with full empty page\n\n## Implementation Steps\n1. Add word count check to delete-word-interceptor\n2. Create words-page-empty function (empty state with CTA to add words)\n3. Update DELETE handler to detect last-word case and use HX-Retarget\n4. Remove custom event JavaScript (htmx.trigger for words-changed) from delete button\n\n## Acceptance Criteria\n- [ ] Deleting last word shows proper empty state (no search, no lesson button)\n- [ ] Empty state has CTA to go to home and add words\n- [ ] No custom JavaScript events needed for this flow\n- [ ] Normal deletion (not last word) still works with hx-swap=delete","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T00:11:11.427517529+01:00","created_by":"u473t8","updated_at":"2026-01-11T00:24:13.137625871+01:00","closed_at":"2026-01-11T00:24:13.137625871+01:00","close_reason":"Implemented HX-Retarget approach: delete-word-interceptor now returns word count, added words-page-empty variant, DELETE handler uses HX-Retarget when last word deleted, removed custom JS event from delete button. Compiles with 0 warnings."}
{"id":"learning-app-z9v","title":"[EPIC] Docs structure + ops skills","description":"## Goal\nRestructure docs for clarity, update all internal links, and add skills for documentation maintenance and server admin.\n\n## Why\nDocs are redundant/outdated; we need a single clear structure plus dedicated skills to maintain docs and ops workflows.\n\n## Success Criteria\n- Docs reorganized with consistent structure and updated links\n- Redundant/outdated docs resolved\n- New skills added for docs maintenance and server admin","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-13T12:21:32.830008704+01:00","created_by":"u473t8","updated_at":"2026-01-13T14:10:05.902895144+01:00","closed_at":"2026-01-13T14:10:05.902902111+01:00","dependencies":[{"issue_id":"learning-app-z9v","depends_on_id":"learning-app-1wz","type":"blocks","created_at":"2026-01-13T12:22:02.86292574+01:00","created_by":"u473t8"},{"issue_id":"learning-app-z9v","depends_on_id":"learning-app-q38","type":"blocks","created_at":"2026-01-13T12:22:36.477181262+01:00","created_by":"u473t8"},{"issue_id":"learning-app-z9v","depends_on_id":"learning-app-5c2","type":"blocks","created_at":"2026-01-13T12:23:11.298568223+01:00","created_by":"u473t8"}],"comments":[{"id":20,"issue_id":"learning-app-z9v","author":"u473t8","text":"All child tasks completed and approved. Ready to close epic.","created_at":"2026-01-13T13:09:47Z"}]}
